!function(a){a.easytabs=function(s,t){var e,n,i,l,c,o,d=this,r=a(s),h={animate:!0,panelActiveClass:"active",tabActiveClass:"active",defaultTab:"li:first-child",animationSpeed:"normal",tabs:"> ul > li",updateHash:!0,cycle:!1,collapsible:!1,collapsedClass:"collapsed",collapsedByDefault:!0,uiTabs:!1,transitionIn:"fadeIn",transitionOut:"fadeOut",transitionInEasing:"swing",transitionOutEasing:"swing",transitionCollapse:"slideUp",transitionUncollapse:"slideDown",transitionCollapseEasing:"swing",transitionUncollapseEasing:"swing",containerClass:"",tabsClass:"",tabClass:"",panelClass:"",cache:!0,panelContext:r},b={fast:200,normal:400,slow:600};d.init=function(){d.settings=o=a.extend({},h,t),o.uiTabs&&(o.tabActiveClass="ui-tabs-selected",o.containerClass="ui-tabs ui-widget ui-widget-content ui-corner-all",o.tabsClass="ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all",o.tabClass="ui-state-default ui-corner-top",o.panelClass="ui-tabs-panel ui-widget-content ui-corner-bottom"),o.collapsible&&void 0!==t.defaultTab&&void 0===t.collpasedByDefault&&(o.collapsedByDefault=!1),"string"==typeof o.animationSpeed&&(o.animationSpeed=b[o.animationSpeed]),a("a.anchor").remove().prependTo("body"),r.data("easytabs",{}),d.setTransitions(),d.getTabs(),u(),f(),g(),T(),w(),r.attr("data-easytabs",!0)},d.setTransitions=function(){i=o.animate?{show:o.transitionIn,hide:o.transitionOut,speed:o.animationSpeed,collapse:o.transitionCollapse,uncollapse:o.transitionUncollapse,halfSpeed:o.animationSpeed/2}:{show:"show",hide:"hide",speed:0,collapse:"hide",uncollapse:"show",halfSpeed:0}},d.getTabs=function(){var s;d.tabs=r.find(o.tabs),d.panels=a(),d.tabs.each(function(){var t=a(this),e=t.children("a"),n=t.children("a").data("target");t.data("easytabs",{}),void 0!==n&&null!==n?t.data("easytabs").ajax=e.attr("href"):n=e.attr("href"),n=n.match(/#([^\?]+)/)[0].substr(1),s=o.panelContext.find("#"+n),s.length?(s.data("easytabs",{position:s.css("position"),visibility:s.css("visibility")}),s.not(o.panelActiveClass).hide(),d.panels=d.panels.add(s),t.data("easytabs").panel=s):d.tabs=d.tabs.not(t)})},d.selectTab=function(a,s){var t=window.location,e=(t.hash.match(/^[^\?]*/)[0],a.parent().data("easytabs").panel),n=a.parent().data("easytabs").ajax;o.collapsible&&!c&&(a.hasClass(o.tabActiveClass)||a.hasClass(o.collapsedClass))?d.toggleTabCollapse(a,e,n,s):a.hasClass(o.tabActiveClass)&&e.hasClass(o.panelActiveClass)?o.cache||y(a,e,n,s):y(a,e,n,s)},d.toggleTabCollapse=function(a,s,t,e){d.panels.stop(!0,!0),p(r,"easytabs:before",[a,s,o])&&(d.tabs.filter("."+o.tabActiveClass).removeClass(o.tabActiveClass).children().removeClass(o.tabActiveClass),a.hasClass(o.collapsedClass)?(!t||o.cache&&a.parent().data("easytabs").cached||(r.trigger("easytabs:ajax:beforeSend",[a,s]),s.load(t,function(t,e,n){a.parent().data("easytabs").cached=!0,r.trigger("easytabs:ajax:complete",[a,s,t,e,n])})),a.parent().removeClass(o.collapsedClass).addClass(o.tabActiveClass).children().removeClass(o.collapsedClass).addClass(o.tabActiveClass),s.addClass(o.panelActiveClass)[i.uncollapse](i.speed,o.transitionUncollapseEasing,function(){r.trigger("easytabs:midTransition",[a,s,o]),"function"==typeof e&&e()})):(a.addClass(o.collapsedClass).parent().addClass(o.collapsedClass),s.removeClass(o.panelActiveClass)[i.collapse](i.speed,o.transitionCollapseEasing,function(){r.trigger("easytabs:midTransition",[a,s,o]),"function"==typeof e&&e()})))},d.matchTab=function(a){return d.tabs.find("[href='"+a+"'],[data-target='"+a+"']").first()},d.matchInPanel=function(a){return a?d.panels.filter(":has("+a+")").first():[]},d.selectTabFromHashChange=function(){var a,s=window.location.hash.match(/^[^\?]*/)[0],t=d.matchTab(s);o.updateHash&&(t.length?(c=!0,d.selectTab(t)):(a=d.matchInPanel(s),a.length?(s="#"+a.attr("id"),t=d.matchTab(s),c=!0,d.selectTab(t)):e.hasClass(o.tabActiveClass)||o.cycle||(""===s||d.matchTab(l).length||r.closest(s).length)&&(c=!0,d.selectTab(n))))},d.cycleTabs=function(s){o.cycle&&(s%=d.tabs.length,$tab=a(d.tabs[s]).children("a").first(),c=!0,d.selectTab($tab,function(){setTimeout(function(){d.cycleTabs(s+1)},o.cycle)}))},d.publicMethods={select:function(s){var t;0===(t=d.tabs.filter(s)).length?0===(t=d.tabs.find("a[href='"+s+"']")).length&&0===(t=d.tabs.find("a"+s)).length&&0===(t=d.tabs.find("[data-target='"+s+"']")).length&&0===(t=d.tabs.find("a[href$='"+s+"']")).length&&a.error("Tab '"+s+"' does not exist in tab set"):t=t.children("a").first(),d.selectTab(t)}};var p=function(s,t,e){var n=a.Event(t);return s.trigger(n,e),n.result!==!1},u=function(){r.addClass(o.containerClass),d.tabs.parent().addClass(o.tabsClass),d.tabs.addClass(o.tabClass),d.panels.addClass(o.panelClass)},f=function(){var s,t=window.location.hash.match(/^[^\?]*/)[0],i=d.matchTab(t).parent();1===i.length?(e=i,o.cycle=!1):(s=d.matchInPanel(t),s.length?(t="#"+s.attr("id"),e=d.matchTab(t).parent()):(e=d.tabs.parent().find(o.defaultTab),0===e.length&&a.error("The specified default tab ('"+o.defaultTab+"') could not be found in the tab set."))),n=e.children("a").first(),C(i)},C=function(s){var t,i;o.collapsible&&0===s.length&&o.collapsedByDefault?e.addClass(o.collapsedClass).children().addClass(o.collapsedClass):(t=a(e.data("easytabs").panel),i=e.data("easytabs").ajax,!i||o.cache&&e.data("easytabs").cached||(r.trigger("easytabs:ajax:beforeSend",[n,t]),t.load(i,function(a,s,i){e.data("easytabs").cached=!0,r.trigger("easytabs:ajax:complete",[n,t,a,s,i])})),e.data("easytabs").panel.show().addClass(o.panelActiveClass),e.addClass(o.tabActiveClass).children().addClass(o.tabActiveClass))},g=function(){d.tabs.children("a").bind("click.easytabs",function(s){o.cycle=!1,c=!1,d.selectTab(a(this)),s.preventDefault()})},y=function(a,s,t,e){if(d.panels.stop(!0,!0),p(r,"easytabs:before",[a,s,o])){var n,h,b,u,f=d.panels.filter(":visible"),C=s.parent(),g=window.location.hash.match(/^[^\?]*/)[0];o.animate&&(n=v(s),h=f.length?m(f):0,b=n-h),l=g,u=function(){r.trigger("easytabs:midTransition",[a,s,o]),o.animate&&"fadeIn"==o.transitionIn&&0>b&&C.animate({height:C.height()+b},i.halfSpeed).css({"min-height":""}),o.updateHash&&!c?window.location.hash="#"+s.attr("id"):c=!1,s[i.show](i.speed,o.transitionInEasing,function(){C.css({height:"","min-height":""}),r.trigger("easytabs:after",[a,s,o]),"function"==typeof e&&e()})},!t||o.cache&&a.parent().data("easytabs").cached||(r.trigger("easytabs:ajax:beforeSend",[a,s]),s.load(t,function(t,e,n){a.parent().data("easytabs").cached=!0,r.trigger("easytabs:ajax:complete",[a,s,t,e,n])})),o.animate&&"fadeOut"==o.transitionOut&&(b>0?C.animate({height:C.height()+b},i.halfSpeed):C.css({"min-height":C.height()})),d.tabs.filter("."+o.tabActiveClass).removeClass(o.tabActiveClass).children().removeClass(o.tabActiveClass),d.tabs.filter("."+o.collapsedClass).removeClass(o.collapsedClass).children().removeClass(o.collapsedClass),a.parent().addClass(o.tabActiveClass).children().addClass(o.tabActiveClass),d.panels.filter("."+o.panelActiveClass).removeClass(o.panelActiveClass),s.addClass(o.panelActiveClass),f.length?f[i.hide](i.speed,o.transitionOutEasing,u):s[i.uncollapse](i.speed,o.transitionUncollapseEasing,u)}},v=function(s){if(s.data("easytabs")&&s.data("easytabs").lastHeight)return s.data("easytabs").lastHeight;var t=s.css("display"),e=s.wrap(a("<div>",{position:"absolute",visibility:"hidden",overflow:"hidden"})).css({position:"relative",visibility:"hidden",display:"block"}).outerHeight();return s.unwrap(),s.css({position:s.data("easytabs").position,visibility:s.data("easytabs").visibility,display:t}),s.data("easytabs").lastHeight=e,e},m=function(a){var s=a.outerHeight();return a.data("easytabs")?a.data("easytabs").lastHeight=s:a.data("easytabs",{lastHeight:s}),s},T=function(){"function"==typeof a(window).hashchange?a(window).hashchange(function(){d.selectTabFromHashChange()}):a.address&&"function"==typeof a.address.change&&a.address.change(function(){d.selectTabFromHashChange()})},w=function(){var a;o.cycle&&(a=d.tabs.index(e),setTimeout(function(){d.cycleTabs(a+1)},o.cycle))};d.init()},a.fn.easytabs=function(s){var t=arguments;return this.each(function(){var e=a(this),n=e.data("easytabs");return void 0===n&&(n=new a.easytabs(this,s),e.data("easytabs",n)),n.publicMethods[s]?n.publicMethods[s](Array.prototype.slice.call(t,1)):void 0})}}(jQuery);